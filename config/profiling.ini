; Bitville APM Configuration
; Changes require PHP-FPM restart to take effect
;
; Production path: /etc/bitville-apm/profiling.ini
; This file should be deployed to /etc/bitville-apm/ on production servers

; === Core Profiling ===
profiling_enabled = false
profiling_threshold_ms = 500

; === XHProf Settings ===
; DO NOT change xhprof_flags unless you know what you're doing
; CPU and memory flags add 200-300% overhead
xhprof_flags = 0  ; XHPROF_FLAGS_NO_BUILTINS

; === SQL Capture ===
sql_capture_enabled = true
sql_capture_method = "phalcon"  ; Options: phalcon, pdo, both, none
sql_redact_sensitive = true
sql_stack_trace = true
sql_stack_trace_limit = 5

; === Request Metadata ===
request_metadata_enabled = true

; === Listener Communication ===
listener_socket_path = "/var/run/bitville-apm/listener.sock"
listener_timeout_ms = 50

; === Disk Buffer (fallback when listener unavailable) ===
disk_buffer_enabled = true
disk_buffer_path = "/var/www/project/site/profiling/buffer"

; === Project Identification ===
project_name = "default"

; === Correlation Strategy ===
; Use application_name in Postgres connection string
correlation_via_application_name = true
; Prepend SQL comments with correlation ID
correlation_via_sql_comment = true
